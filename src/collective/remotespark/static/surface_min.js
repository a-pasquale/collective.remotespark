var svGlobal={version:"2.8",log:1,isMultitask:hi5.browser.isMultitask,util:{},logger:{debug:function(f){2<svGlobal.log&&console.log(f)},info:function(f){1<svGlobal.log&&console.log(f)},warn:function(f){0<svGlobal.log&&console.log(f)}}},isTouch=hi5.browser.isTouch;function cancelDefault(f){f.preventDefault();f.stopPropagation()}window.onerror=function(f,D,m){console.log("eeerrror: "+f+" line:"+m)};
function LocalInterface(){function f(){return document.activeElement!=l&&p<=window.innerWidth&&s<=window.innerHeight}function D(a){function b(a,b){for(var d,c=a.length,e=Array(c),g=0;g<c;g++){d=a[g];var h=e,f=g,j;j=d.identifier;if(!(256>j)){var k=w.indexOf(j);-1!=k?j=k:(w.push(j),j=w.length-1)}h[f]={contactId:j,contactFlags:b,x:d.pageX-i.offsetLeft,y:d.pageY-i.offsetTop}}return e}var d,w=[],c=!1;this.handle=function(e){var g=e.type,h=e.touches,f=e.changedTouches;cancelDefault(e);switch(g){case "touchstart":c=
!1;d=e=b(h,25);break;case "touchmove":e=b(f,26);g=!1;if(0<d.length&&1==e.length){a:{h=d.length;for(f=0;f<h;f++)if(d[f].contactId==e[0].contactId){h=f;break a}h=-1}-1!=h&&d[h].x==e[0].x&&d[h].y==e[0].y&&(g=!0)}if(g)break;else 0<d.length&&(a.redirectTouches(d),d.length=0);a.redirectTouches(e);c=!0;break;case "touchend":if(c)e=b(f,4);else{a.redirectTouches(d);e=d.length;for(g=0;g<e;g++)d[g].contactFlags=4;e=d}a.redirectTouches(e);w.length=d.length=0;break;case "touchcancel":a.redirectTouches(b(f,34)),
w.length=d.length=0}}}function m(a){function b(a,b){for(var d=0,c=a.length;d<c;d++)if(a[d].identifier==b)return a[d];return null}var d=0,c=0,e=0,g=0,h=!1,i=0,j=0,k=0,l=0,y=!1,m=!1,r=2*window.devicePixelRatio,o=0,s=!1;this.delay=!1;this.handle=function(p){var t=0,t=p.touches,v=p.changedTouches,q,n;switch(p.type){case "touchstart":moveSpace=moveCount=0;s=!1;c=t.length;m=!1;g=(new Date).getTime();h=200>g-e;n=t[0];d=n.identifier;i=n.pageX;j=n.pageY;y=!0;2==c?(n=t[1].screenX-t[0].screenX,t=t[1].screenY-
t[0].screenY,n=Math.sqrt(n*n+t*t)):n=0;o=n;s=2==c&&o>110*window.devicePixelRatio;break;case "touchmove":if(s)return;1==c&&f()&&(window.scrollTo(0,0),cancelDefault(p));n=v[t.length-1];if(n.identifier!=d&&(n=b(v,d),!n)){cancelDefault(p);return}v=n.pageX;q=n.pageY;if(y){if(Math.abs(v-i)<r&&Math.abs(q-j)<r){cancelDefault(p);return}y=!1;t=(new Date).getTime()-g;if((m=180>t)&&!f()&&1==c){s=!0;return}a.touchstart({x:i,y:j,flick:m,pointes:c,screenX:n.screenX,screenY:n.screenY,distance:o})}cancelDefault(p);
a.touchmove({x:v,y:q,flick:m,pointes:c,screenX:n.screenX,screenY:n.screenY,distance:o});break;case "touchend":if(s)return;if(n=b(v,d)){var L=(new Date).getTime(),v=n.pageX;q=n.pageY;m?a.touchend({x:v,y:q,flick:!0,pointes:c,moved:!y,screenX:n.screenX,screenY:n.screenY}):(t=L-g,y)?(e=L,h||(k=v,l=q),500>t)?(e=L,a.touchstart({x:k,y:l,flick:!1,pointes:c,moved:!y,screenX:n.screenX,screenY:n.screenY}),a.touchend({x:k,y:l,flick:!1,pointes:c,moved:!y,screenX:n.screenX,screenY:n.screenY})):a.longpress({x:v,
y:q,flick:!1,pointes:c,screenX:n.screenX,screenY:n.screenY}):a.touchend({x:v,y:q,flick:!1,pointes:c,moved:!y,screenX:n.screenX,screenY:n.screenY})}break;case "touchcancel":console.log("canceled!!")}h&&cancelDefault(p)}}function Z(){c=document.createElement("textarea");c.id="wsinput";c.style.resize="none";c.style.opacity=0;c.style.position="absolute";c.style.margin="0";c.style.border="0";var a=hi5.tool.getPos(i);c.style.left=a.x+"px";c.style.top=a.y+"px";c.style.width=p+"px";c.style.height=s+"px";
c.style.zIndex=88;c.style.cursor="default";c.style.fontSize="1px";i.parentNode.appendChild(c)}function u(){e||(e=document.getElementById("svImgCursor"),e||(e=document.createElement("img"),e.id="svImgCursor",e.alt="+",e.style.position="absolute",e.style.left=90,e.style.top=90,e.scrX=0,e.scrY=0,e.hotX=0,e.hotY=0,$&&(e.src=$.data),document.documentElement.appendChild(e),1<svGlobal.log&&console.log("imgCursor: enabled"),e.addEventListener("touchstart",E,!1),e.addEventListener("touchend",E,!1),e.addEventListener("touchmove",
E,!1),e.addEventListener("touchcancel",E,!1)))}function x(){var a=document.documentElement;a.style.overflow="hidden";q=Math.min(window.innerWidth/p,window.innerHeight/s);hi5.tool.scale(a,q)}function r(){g.toolbar&&g.toolbar.parentNode&&(g.toolbar.parentNode.removeChild(g.toolbar),g.toolbar=null)}function ka(){var a=document.createElement("div");a.contentEditable="true";a.style.position="absolute";a.style.zIndex=89;a.style.left=0;a.style.top=0;a.tabIndex=1;a.style.outline="none";a.style.opacity=0;
i.parentNode.appendChild(a);return a}function la(a){g.focused=!0;j.onfocus(a);aa=!0;null==c||hi5.browser.isOpera||!o||(h(!1,29),h(!1,56),h(!1,42),ba&&setTimeout(function(){if(!("undefined"==typeof j||null==j)){j.send("880");var a=ka();try{a.focus();document.execCommand("paste",!1,null);var d="";"innerText"in a?d=a.innerText:(d=a.innerHTML,d=Ca(d));0<d.length&&j.setDataFromClip(d)}catch(e){}finally{a.parentNode.removeChild(a),c.focus()}}},3))}function ma(a){if(!na&&g.railWin&&g.railWin.isRunning()){var b=
__svi18n.remoteApp.close;a||(a=window.event);a&&(a.returnValue=b);hi5.browser.isFirefox&&hi5.notifications.show({msg:b});return b}}function K(){document.oncontextmenu=function(){return!1};document.onselectstart=function(){return!1}}function y(a){if(H)hi5.browser.isTouch||x();else j.onresize(a)}function L(){window.addEventListener("beforeunload",ma,!1);K();window.addEventListener("focus",la,!1);window.addEventListener("blur",function(){g.focused=!1},!1);window.addEventListener("resize",y,!1)}function z(a){var b=
hi5.browser;b.isFirefox||b.isOpera||b.isRIM?a.addEventListener("input",oa,!1):a.addEventListener("textInput",pa,!1)}function Da(){var a=document.getElementById("pc_key");a&&(a.style.display="block",a.style.top=window.pageYOffset+"px")}function A(){var a=document.getElementById("pc_key");a&&(a.style.display="none")}function k(a){cancelDefault(a);if("touchstart"==a.type){var b=a.target,d=0;switch(b.innerHTML.charCodeAt(0)){case 8592:d=203;break;case 8593:d=200;break;case 8594:d=205;break;case 8595:d=
208;break;default:switch(a.target.innerHTML){case "Ctrl":I?h(!1,29):h(!0,29);I=!I;b.style.color=I?"red":"white";return;case "Alt":J?h(!1,56):h(!0,56);J=!J;b.style.color=J?"red":"white";return;case "Del":d=211;break;case "F1":d=59;break;case "F2":d=60;break;case "F3":d=61;break;case "F4":d=62;break;case "F5":d=63;break;case "F6":d=64;break;case "F7":d=65;break;case "F8":d=66;break;case "F9":d=67;break;case "F10":d=68;break;case "F11":d=87;break;case "F12":d=88;break;case "Esc":d=1;break;case "Alt+F4":h(!0,
56);h(!0,62);h(!1,62);h(!1,56);return;case "Start":h(!0,29);h(!0,1);h(!1,1);h(!1,29);return;case "Ctrl+Alt+Del":h(!0,29);h(!0,56);h(!0,211);h(!1,211);h(!1,56);h(!1,29);return;case "...":if(a=document.getElementById("pc_key_more"))a.style.display="block"==a.style.display?"none":"block";return}}h(!0,d);h(!1,d)}}function M(){var a=hi5.browser.isRIM;l=document.getElementById("svTouchInput");if(!l&&(l=document.createElement(a?"input":"textarea"),a&&(l.type="password"),l.id="svTouchInput",l.style.resize=
"none",l.style.cursor="default",l.cols=1,l.rows=1,l.style.opacity=0,l.style.fontSize="2em",l.style.width="1px",l.style.height="1px",l.style.display="inline-block",l.onkeydown=qa,l.onkeyup=qa,l.autocorrect="boolean"==typeof l.autocorrect?!1:"off",l.autocomplete="boolean"==typeof l.autocomplete?!1:"off",l.spellcheck=!1,l.autocapitalize="boolean"==typeof l.autocapitalize?!1:"none",z(l),l.addEventListener("focus",Da,!1),l.addEventListener("blur",A,!1),a=document.getElementById("pc_key"))){for(var b=a.getElementsByTagName("span"),
d=b.length,c=0;c<d;c++)b[c].className="button",b[c].style.color="white",b[c].addEventListener("touchstart",k,!1),b[c].addEventListener("touchup",k,!1);hi5.browser.isSafari&&(a.style.position="absolute")}}function R(a,b){function d(a,d){var c=document.createElement("span");c.data_path=a;c.className="path";c.innerHTML=d;c.onclick=function(){R(this.data_path,b)};return c}function c(a){for(var b=e;b.hasChildNodes();)b.removeChild(b.firstChild);var g=d("/","&nbsp&nbsp&nbsp/");b.appendChild(g);if(!("/"==
a||""==a))for(var a=a.split("/"),h="/",w=0,f=a.length;w<f;w++)g=a[w],""!=g&&(h=h+a[w]+"/",g=d(h,g+"/"),b.appendChild(g))}var e=document.getElementById("parentPath");e.currentDir||(e.currentDir="/");"."==a?a=e.currentDir:e.currentDir=a;e.currentDir=a;j.getShareFiles(a,function(a){function d(b){b||(b=g.getValue("Name"));var c=a.parent;if(c==""||c.charAt(c.length-1)!="/")c=c+"/";return c+b}a.error&&alert(__svi18n.file[a.error]);var e=new hi5.DataTable(a),g=new hi5.DataGrid(document.getElementById("filelist"));
g.dataTable=e;var h=hi5.tool.bytesToSize;g.beforeDisplayValue=function(a,b){var d=e.cols[a].name;return d=="Date Modified"?(new Date(b)).toLocaleString():d=="Size"?h(b):d=="Type"&&"folder"==b?__svi18n.file.folder:b};g.onrowclick=function(c){var e=g.getValue("Name");if(g.getValue("Type")=="folder")R((a.parent=="/"?"":a.parent)+"/"+e,b);else{e=d(e);c.target.name=="view"&&(e=e+"&action=view");j.getFile(e)}};g.beforeAppendRow=function(a){if(e.getValue(e.getColNo("Type"))=="folder")a.getElementsByTagName("img")[0].style.visibility=
"hidden";else{a.draggable=true;var b=g.getValue("Name"),c=d(b),c="application/octet-stream:"+b+":"+j.getFileLink(c);a.addEventListener("dragstart",function(a){a.dataTransfer.setData("DownloadURL",c)},false)}};g.open();c(a.parent);b.resize()})}function Ea(){var a=document.getElementById("filecontainer");B=new hi5.Lightbox(a);R(".",B);B.show()}function Fa(){l&&l.focus()}function ca(){var a=hi5.$("appinfo");if(g.showToolbar&&(hi5.browser.isTouch||C||a)){g.toolbar=new hi5.Toolbar;var b=hi5.appcfg,d=b&&
b.img?b.img:null;hi5.browser.isTouch&&g.toolbar.addButton(d&&d.kbd?d.kbd:"kbd.png",Fa);C&&(d=g.toolbar.addButton(d&&d.cloud?d.cloud:"cloud.png",Ea),d.title=__svi18n.info.files);hi5.browser.isTouch&&(g.toolbar.appendChild(l),g.toolbar.activeObj=l);document.documentElement.appendChild(g.toolbar);new hi5.Fadable(g.toolbar,3E3,hi5.browser.isTouch?i:c);d=!0;b&&b.toolbar&&(d=b.toolbar.fadable);g.toolbar.setFadable(d);d&&(g.toolbar.style.display="none");hi5.browser.isTouch&&hi5.browser.isSafari&&(g.toolbar.style.position=
"absolute",g.toolbar.style.marginLeft=0);d=function(){var a=j.getAppInfo(),b=hi5.$("numericId");if(b)b.innerHTML=a.numericId;if(b=hi5.$("connectingTo"))b.innerHTML=a.server;if(b=hi5.$("joinLink")){var d=hi5.appcfg&&hi5.appcfg.pageJoin?hi5.appcfg.pageJoin:"join.html",d=location.protocol+"//"+location.host+"/"+d+"?id="+a.numericId,c=a.webAddress;if(!c||c.length<1)c=j.getGateway();a=c.indexOf("://");c=c.substring(a+3);a=c.indexOf("/");a>0&&(c=c.substring(0,a));c.toLowerCase()!=location.host.toLowerCase()&&
(d=d+("&gateway="+c));b.innerHTML=d;b.href=d}b=new hi5.Lightbox(hi5.$("appinfo"));b.show();document.oncontextmenu=null;document.onselectstart=null;b.onclose=K};a&&(d=g.toolbar.addButton(b&&b.img&&b.img.shadowing?hi5.appcfg.img.shadowing:"info.png",d),d.title=__svi18n.info.info);if(g.onloadtoolbar)g.onloadtoolbar(g.toolbar)}}function Ga(){var a=hi5.browser.isTouch?i:c;C&&!F&&(svGlobal.util.initMapDisk(a,C),svGlobal.util.initMapDisk(document.getElementById("filecontainer"),C),document.getElementById("uploadfile").addEventListener("change",
function(a){C(a.target.files)},!1))}function Ca(a){a=a.replace(/<br\/?>/gi,"\r\n").replace(/(<([^>]+)>)/gi,"");return a.replace(/&[^;]+;/gi,function(a){return Ha[a]||a})}function da(a,b,d){a=e.scrX+a;b=e.scrY+b;0>a?a=0:a>p&&(a=p-1);0>b?b=0:b>s&&(b=s-1);e.scrX=a;e.scrY=b;e.style.left=i.offsetLeft+a-e.hotX+"px";e.style.top=i.offsetTop+b-e.hotY+"px";o&&!d&&j.send("82"+a+"\t"+b)}function S(a,b,d){e||u();da(a-e.scrX,b-e.scrY,d)}function ea(a,b,d,c){var g;switch(a){case "touchstart":fa=!1;touchStartX=b;
touchStartY=d;0==e.scrX&&0==e.scrY&&S(b-50,d-50);c&&j.send("80"+e.scrX+"\t"+e.scrY+"\t0");break;case "touchmove":fa=!0;c=b-T;a=d-N;if(0==c&&0==a)return;(g=5>Math.abs(ra)&&5>Math.abs(sa)&&(7<Math.abs(c)||7<Math.abs(a)))||da(c,a);ra=c;sa=a;break;case "touchend":(a=!fa&&!c)&&j.send("80"+e.scrX+"\t"+e.scrY+"\t0"),(a||c)&&j.send("81"+e.scrX+"\t"+e.scrY+"\t0")}T=b;N=d}function E(a){o&&U.handle(a)}function ga(a){if(hi5.browser.isFirefox){switch(a){case 109:return 189;case 107:return 187;case 59:return 186;
case 61:return ha?187:61;case 220:return ha?222:220;case 222:return ha?192:222;case 224:return 17}return a}if(hi5.browser.isOpera){switch(a){case 59:return 186;case 61:return 187;case 109:return 189;case 219:return 91;case 57351:return 93}return a}return 91==a||93==a?17:a}function ta(a){var b=a.keyCode,d="keydown"==a.type;d&&(229<=b&&c?c.svIMEMode||(c.style.background="transparent",c.style.opacity=1,c.style.fontSize="1em",c.svIMEMode=!0):c.svIMEMode&&(c.style.opacity=0,c.style.fontSize="1px",c.svIMEMode=
!1));if(ua(a,b,d))return cancelDefault(a);if(17==b){if(a.altKey)return!0;h(d,29);return!0}if(18==b){if(a.ctrlKey)return!0;h(d,56);h(!1,56);h(!1,29);return!0}if(a.ctrlKey&&a.altKey)return!0;var b=ga(b),e=ia(b);if(0<e)return h(d,e),cancelDefault(a);if(a.ctrlKey||a.altKey)return V(d,b),d&&(W=b),17==b||(a.ctrlKey||a.metaKey)&&(86==b||67==b||88==b)?(d&&67==b&&(c.value="A",c.select()),!0):cancelDefault(a);if(b==W&&!d)return V(!1,b),W=0,cancelDefault(a);W=0;return!0}function ua(a,b,d){if(!a.altKey)return!1;
switch(b){case 35:if(!a.ctrlKey)return!1;h(d,83);break;case 33:h(d,15);break;case 34:d?(h(!0,42),h(!0,15)):(h(!1,15),h(!1,42));break;case 45:h(d,1);break;case 36:d?(h(!1,56),h(!0,29),h(!0,1)):(h(!1,1),h(!1,29));break;default:return!1}return!0}function va(a){if(!o)return!1;var b=a.keyCode,d="keydown"==a.type;if(d)229<=b&&c?c.svIMEMode||(c.style.background="transparent",c.style.opacity=1,c.style.fontSize="1em",c.svIMEMode=!0):c.svIMEMode&&(c.style.opacity=0,c.style.fontSize="1px",c.svIMEMode=!1);else if(c&&
c.svIMEMode)return;if(ua(a,b,d))return cancelDefault(a);if(229<=b)return d&&a.ctrlKey?h(!0,29):h(!1,29),!0;if(1>b)return!0;b=ga(b);if(wa(b,d))return cancelDefault(a);var e=ia(b);0<e?h(d,e):V(d,b);d&&a.altKey&&31<b&&(V(!1,b),h(!1,56));return 17==b||(a.ctrlKey||a.metaKey)&&(86==b||67==b||88==b)?(d&&67==b&&(c.value="A",c.select()),!0):144==b?!1:cancelDefault(a)}function qa(a){if(!o)return!1;var b=ga(a.keyCode),d="keydown"==a.type;if(!wa(b,d)){13==b&&(a.target.value="");b=ia(b);if(-1==b)return!0;h(d,
b)}return cancelDefault(a)}function pa(a){if(o)return j.send("86"+a.data+"\t"+(I||J?1:0)),isTouch||(a.target.value=""),cancelDefault(a)}function oa(a){if(!o)return!1;j.send("86"+a.target.value+"\t"+(I||J?1:0));a.target.value="";return cancelDefault(a)}function Ia(a){if(!o||!aa)return cancelDefault(a);aa=!1;j.prePaste=!0;if("clipboardData"in a)return j.setDataFromClip(a.clipboardData.getData("text/plain")),cancelDefault(a);var b=a.target,d=b.value;hi5.browser.isFirefox||hi5.browser.isOpera?b.removeEventListener("input",
oa,!1):b.removeEventListener("textInput",pa,!1);var c=function(){b.value==d&&setTimeout(c,5);j.setDataFromClip(b.value);b.value="";z(b)};setTimeout(c,5);return!0}function xa(a){if(o){if(ya){var b=(new Date).getTime(),d=b-za;za=b;if(500<d)return}a.target.value=j.getClipData();a.target.select();setTimeout(function(){c.value=""},555)}}function wa(a,b){return 44==a?(h(!0,170),h(!0,183),!0):19==a?(b?(h(!0,225),h(!0,29),h(!0,69),h(!0,225),h(!0,157),h(!0,197)):h(!1,29),!0):!1}function h(a,b){o&&j.send("84"+
(a?0:49152)+"\t"+b)}function V(a,b){o&&j.send("8B"+(a?0:49152)+"\t"+b)}function X(a,b,d,c){c||(c=q);j.send("80"+a/c+"\t"+b/c+"\t"+d)}function Ja(a){a.target.focus();if(!o)return!1;var b=a.pageX-i.offsetLeft,d=a.pageY-i.offsetTop;if(g.railWin){var c=g.railWin.winClientDeltaX;O=b<=c||b>=window.innerWidth-c||d<=c||d>=window.innerHeight-c}else O=!1;if(O)return!1;X(b,d,a.button);return cancelDefault(a)}function Ka(a){if(!o)return!1;e&&"-30px"!=e.style.left&&(e.style.left="-30px");var b=void 0,b=q;j.send("82"+
(a.pageX-i.offsetLeft)/b+"\t"+(a.pageY-i.offsetTop)/b);return cancelDefault(a)}function Y(a,b,d,c){c||(c=q);j.send("81"+a/c+"\t"+b/c+"\t"+d)}function La(a){if(!o)return!1;if(O)return O=!1;Y(a.pageX-i.offsetLeft,a.pageY-i.offsetTop,a.button);return cancelDefault(a)}function Aa(a){if(!o)return!1;var b=a.pageX-i.offsetLeft,c=a.pageY-i.offsetTop,e="1";a.wheelDelta?0<a.wheelDelta&&(e="0"):a.detail&&0>a.detail&&(e="0");a=void 0;a=q;j.send("83"+b/a+"\t"+c/a+"\t"+e);return!1}function ia(a){switch(a){case 33:return 201;
case 34:return 209;case 35:return 207;case 36:return 199;case 37:return 203;case 38:return 200;case 39:return 205;case 40:return 208;case 154:return 183;case 45:return 210;case 46:return 211;case 65406:return 184;case 91:return 91;case 93:return 93;case 27:return 1;case 8:return 14;case 9:return 15;case 13:return 28;case 224:case 17:return 29;case 16:return 54;case 18:return 56;case 20:return 58;case 112:return 59;case 113:return 60;case 114:return 61;case 115:return 62;case 116:return 63;case 117:return 64;
case 118:return 65;case 119:return 66;case 120:return 67;case 121:return 68;case 122:return 87;case 123:return 88;case 144:return 69;case 145:return 70}return-1}function Ba(a){return"url("+a.data+") "+a.hotX+" "+a.hotY+", default"}var i=document.getElementById("remotectrl"),j=null,H=!1,q=1;i.style.outline="none";var p=0,s=0,G=i.getContext("2d"),c=null,ya=!1,I=!1,J=!1,na=!1,aa=!1,C=null,ba=!0;this.context=G;this.fileProgress=null;var g=this,o=!0,P=!1,F=!1,Q=null,B=null,e=null,$=null,U=null,l=null,
T=-1,N=-1,ra=0,sa=0,fa=!1,ja=null;window.devicePixelRatio=window.devicePixelRatio||1;hi5.browser.isTouch?M():Z();window.addEventListener("scroll",function(){setTimeout(function(){var a=document.getElementById("pc_key");a&&(a.style.left=window.pageXOffset+"px",a.style.top=window.pageYOffset+"px");g.toolbar&&(g.toolbar.style.top=window.pageYOffset+"px",g.toolbar.style.left=window.pageXOffset+(window.innerWidth-g.toolbar.offsetWidth)/2+"px")},200)},!1);this.railWin=this.toolbar=null;this.browser=window;
this.focused=!1;this.showToolbar=!0;this.setCaretPos=function(){};this.showMessage=function(a){hi5.notifications.notify({msg:a})};this.hideWhenClose=!0;this.setReadOnly=function(a){o=!a};this.setPlayerMode=function(){F=!0;g.showToolbar=!1;g.setReadOnly(!0);g.hideWhenClose=!1};this.setAutoScale=function(a){H=a};this.setTouchpad=function(a){(P=a)?e||u():e&&e.parentNode&&(e.parentNode.removeChild(e),e=null)};this.setSize=function(a,b,d){window.scrollTo(0,0);p=a;s=b;i.width=p;i.height=s;B&&B.visible()&&
B.dismiss();c&&(c.style.width=p+"px",c.style.height=s+"px");if(H){if(!(a=!hi5.browser.isTouch))a=window.innerWidth,b=window.innerHeight,a=Math.max(p,s)<Math.max(a,b)&&Math.min(p,s)<Math.min(a,b);a&&(H=!1)}H?x():(a=document.documentElement,d?(ja=d,a.style.overflow=d):(ja=p<=window.innerWidth&&s<=window.innerHeight?"hidden":"visible",a.style.overflow=ja))};window.svSurface=this;this.setController=function(a){j=a;hi5.browser.isTouch&&window.addEventListener("orientationchange",function(a){H?x():(j.onorientationchange(a),
window.scrollTo(0,0))},!1)};this.setFileHandler=function(a){a?!C&&!F&&(C=a,g.fileProgress=new hi5.ProgressBar(document.getElementById("total")),r(),ca(),Ga()):(C=null,g.fileProgress=null,g.toolbar&&g.toolbar.removeButton("cloud.png"),r(),ca())};this.disableUpload=function(){document.getElementById("uploadfile").style.visibility="hidden"};this.disableShadow=function(){g.toolbar&&g.toolbar.removeButton("info.png")};this.close=function(){if(0<hi5.notifications.notifySize())hi5.notifications.onempty=
function(){g.close()};else{g.removeEvents();try{e&&e.parentNode&&(e.parentNode.removeChild(e),e=null),r(),na=!0,window&&!F&&(window.opener?window.close():this.hide())}catch(a){}}};this.setFastCopy=function(a){ya=a};this.drawLicense=function(a){var b=a.charAt(0);G.font="12pt Arial";G.fillStyle="W"==b?"red":"black";a=a.substring(1);G.fillText(a,10,s-24)};this.drawText=function(a){G.font="18pt Arial";G.fillStyle="black";G.fillText(a,20,50)};this.showPDF=function(a){var b=document.createElement("div");
b.style.backgroundColor="white";b.style.width=hi5.browser.isTouch?"30%":"95%";b.style.height=hi5.browser.isTouch?"4elm":"90%";b.innerHTML=hi5.browser.isTouch?'<p style="text-align:center;line-height:4em"><a href="'+a+'" target="_blank">Your document is ready.</a></p>':'<iframe src="'+a+'" width="100%" height="100%"><html><body marginwidth="0" marginheight="0"><embed width="100%" height="100%" name="plugin" src="'+a+'" type="application/pdf"></body></html></iframe>';document.documentElement.appendChild(b);
(new hi5.Lightbox(b)).show()};this.hide=function(){g.hideWhenClose&&(i.height=1,i.width=1);null!=c&&(c.style.visibility="hidden")};this.copyToClip=function(a){if(window.clipboardData)window.clipboardData.setData("Text",a);else{var b=ka();"innerText"in b?b.innerText=a:b.innerHTML=a.replace(/\r\n/g,"<br/>");try{b.focus(),document.execCommand("selectAll",!1,null),document.execCommand("copy",!1,null)}catch(d){}finally{b.parentNode.removeChild(b),c&&c.focus()}}};this.fullScreen=function(){i.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT)};
this.removeEvents=function(){if(window){window.removeEventListener("beforeunload",ma,!1);window.removeEventListener("focus",la,!1);window.onresize=null;try{Q&&Q.parentNode&&(Q.parentNode.removeChild(Q),Q=null),c&&c.parentNode&&c.parentNode.removeChild(c)}catch(a){}}document&&(document.oncontextmenu=null,document.onselectstart=null,document.documentElement.style.overflow="visible")};this.refreshFiles=function(){B&&B.visible()&&R(".",B)};this.processLink=function(a){g.toolbar.addButton(hi5.appcfg&&
hi5.appcfg.img&&hi5.appcfg.img.info?hi5.appcfg.img.info:"info.png",function(b){window.open(a);b.target.parentNode.removeChild(b.target)}).title=a;g.toolbar.startFade()};this.setUnicode=function(a){c&&(a?(0<svGlobal.log&&console.log("Using unicode"),c.onkeydown=ta,c.onkeyup=ta):(0<svGlobal.log&&console.log("Using non-unicode"),c.onkeydown=va,c.onkeyup=va))};this.setTouchRemoting=function(a){!0===a?(U=new D(g,i),console.log("touch remoting"),g.showMessage(__svi18n.info.touchremoting)):U=new m(g)};this.setClipboard=
function(a){ba=a};this.run=function(a){window.scrollTo(0,0);r();ca();F||L();hi5.browser.isTouch?F||(U=new m(g),i.addEventListener("touchstart",E,!1),i.addEventListener("touchend",E,!1),i.addEventListener("touchmove",E,!1),i.addEventListener("touchcancel",E,!1)):(F||(c.addEventListener("mousemove",Ka,!1),c.addEventListener("mousedown",Ja,!1),c.addEventListener("mouseup",La,!1),c.addEventListener("mousewheel",Aa,!0),c.addEventListener("DOMMouseScroll",Aa,!0),ba&&(c.addEventListener("paste",Ia,!1),c.addEventListener("copy",
xa,!1),c.addEventListener("cut",xa,!1))),g.setUnicode(a),z(c),a=hi5.tool.getPos(i),c.style.left=a.x+"px",c.style.top=a.y+"px",c.focus());this.drawText(__svi18n.wait);if(g.onstart)g.onstart(i)};var Ha={"&euro;":"\ufffd","&nbsp;":" ","&quot;":'"',"&amp;":"&","&lt;":"<","&gt;":">","&iexcl;":"\ufffd","&cent;":"\ufffd","&pound;":"\ufffd","&curren;":"\ufffd","&yen;":"\ufffd","&brvbar;":"\ufffd","&sect;":"\ufffd","&uml;":"\ufffd","&copy;":"\ufffd","&ordf;":"\ufffd","&reg;":"\ufffd"};this.movCursorBy=da;
this.moveCursor=S;this.touchstart=function(a){P&&1==a.pointes&&(a.pointes=2);switch(a.pointes){case 1:(!a.flick||f())&&X(a.x-i.offsetLeft,a.y-i.offsetTop,0);break;case 2:e||u();ea("touchstart",a.screenX,a.screenY,!a.flick);break;case 3:T=a.screenX,N=a.screenY}};this.touchmove=function(a){P&&1==a.pointes&&(a.pointes=2);switch(a.pointes){case 1:if(!a.flick||f()){var b=void 0,b=q;j.send("82"+(a.x-i.offsetLeft)/b+"\t"+(a.y-i.offsetTop)/b)}break;case 2:ea("touchmove",a.screenX,a.screenY,!a.flick);break;
case 3:b=void 0,b=q,j.send("83"+(a.x-i.offsetLeft)/b+"\t"+(a.y-i.offsetTop)/b+"\t"+(0<a.screenY-N?0:1)),T=a.screenX,N=a.screenY}};this.touchend=function(a){a.moved||i.focus();P&&1==a.pointes&&(a.pointes=2);switch(a.pointes){case 1:S(a.x,a.y,!0);(!a.flick||f())&&Y(a.x-i.offsetLeft,a.y-i.offsetTop,0);break;case 2:ea("touchend",a.screenX,a.screenY,!a.flick);break;case 3:a.moved||(g.toolbar&&(g.toolbar.style.display="block"),l&&l.focus())}};this.flick=function(a){switch(a.from){case 4:console.log("flick from botton");
j.send("840\t209");j.send("8449152\t209");break;case 2:console.log("flick from top"),j.send("840\t201"),j.send("8449152\t201")}};this.longpress=function(a){P&&(a.pointes=2);switch(a.pointes){case 1:var b=a.x-i.offsetLeft,a=a.y-i.offsetTop;S(b,a);X(b,a,2);Y(b,a,2);break;case 2:e&&(X(e.scrX,e.scrY,2,1),Y(e.scrX,e.scrY,2,1))}};this.redirectTouches=function(a){if(o){for(var b=a.length,c,e="90"+b,g=0;g<b;g++)c=a[g],e=e+"\t"+c.contactId+";"+c.contactFlags+";"+Math.floor(c.x/q)+";"+Math.floor(c.y/q);j.send(e)}};
var ha=-1!=navigator.platform.indexOf("Mac"),W=0,za=0,O=!1;this.setCursor=function(a){$=a;hi5.browser.isOpera||(e&&(e.src=a.data,e.hotX=a.hotX,e.hotY=a.hotY),c?c.style.cursor=Ba(a):i.style.cursor=Ba(a))};this.setVisible=function(a,b){var c=a?"visible":"hidden";"number"==typeof b?setTimeout(function(){i.style.visibility=c},b):i.style.visibility=c}}svGlobal.LocalInterface=LocalInterface;
function initDragDrop(f,D){function m(f){if(1!=f.length)alert("Please one file only");else{var m=f[0],f=m.name,u=f.length;if(4<u&&".rdp"==f.substring(u-4).toLowerCase()){var x=new FileReader,K=!1;x.onload=function(f){var r=f.target.result;if(null!=r){var z=D,f=z.elements,u=r.split("\r\n");2>u.length&&(u=r.split("\n"));if(2>u.length)f=!1;else{var r=document.getElementById("gateway"),A=r.value;z.reset();r.value=A;z=0;for(r=u.length;z<r;z++){var k=u[z],A=k.indexOf(":"),M=k.substring(0,A),k=k.substring(A+
3),M=M.toLowerCase();switch(M){case "full address":A=k.indexOf(":");0<A?(f.server.value=k.substring(0,A),f.port.value=k.substring(A+1)):f.server.value=k;break;case "username":f.user.value=k;break;case "domain":f.domain.value=k;break;case "connect to console":f.useConsole.checked="0"!=k;break;case "desktopwidth":f.width.value=k;break;case "desktopheight":f.height.value=k;break;case "session bpp":f.server_bpp.value=k;break;case "audiomode":f.playSound.value=k;break;case "alternate shell":0<k.length&&
(f.command.value=k,document.getElementById("app").checked||(document.getElementById("shell").checked=!0));break;case "shell working directory":f.directory=k;break;case "redirectclipboard":f.mapClipboard.checked="0"!=k;break;case "redirectprinters":f.mapPrinter.checked="0"!=k;break;case "server port":0<k.length&&(f.port.value=k);break;case "disable wallpaper":f.background.checked="0"==k;break;case "disable themes":f.styles.checked="0"==k;case "disable menu anims":f.animation.checked="0"==k;break;case "disable full window drag":f.contents.checked=
"0"==k;break;case "allow font smoothing":f.smoothfont.checked="0"!=k;break;case "allow desktop composition":f.composition.checked="0"!=k;break;case "bitmapcachepersistenable":f.bitmap.checked="0"!=k;break;case "remoteapplicationprogram":f.exe.value=k;break;case "remoteapplicationcmdline":f.args.value=k;break;case "remoteapplicationmode":document.getElementById("app").checked="1"==k;break;case "loadbalanceinfo":f.loadBalanceInfo.value=k}}f=!0}!f&&!K&&(K=!0,x.readAsText(m))}};x.readAsText(m,"UTF-16LE")}else alert("Sorry, Please .rdp file only")}}
function Z(f){m(f.target.files)}if("FileReader"in window){var u=f.style.backgroundColor,x=document.getElementById("rdpfile");x&&x.addEventListener("change",Z,!1);f.addEventListener("dragover",function(m){cancelDefault(m);f.style.backgroundColor="yellow"},!1);f.addEventListener("dragleave",function(m){cancelDefault(m);f.style.backgroundColor=u},!1);f.addEventListener("drop",function(r){cancelDefault(r);f.style.backgroundColor=u;m(r.dataTransfer.files)},!1)}}svGlobal.util.initDragDrop=initDragDrop;
svGlobal.util.initMapDisk=function(f,D){"FileReader"in window&&(f.__oldColor=f.style.backgroundColor,f.addEventListener("dragover",function(m){cancelDefault(m);"0"==f.style.opacity&&(f.style.opacity="0.611");f.style.backgroundColor="yellow"},!1),f.addEventListener("dragleave",function(m){m.stopPropagation();m.preventDefault();"0.611"==f.style.opacity&&(f.style.opacity="0");f.style.backgroundColor=f.__oldColor},!1),f.addEventListener("drop",function(m){m.stopPropagation();m.preventDefault();"0.611"==
f.style.opacity&&(f.style.opacity="0");f.style.backgroundColor=f.__oldColor;D(m.dataTransfer.files)},!1))};window.addEventListener("load",function(){for(var f=document.getElementsByClassName("ver"),D=f.length,m=0;m<D;m++)f[m].innerHTML=svGlobal.version},!1);
