var svGlobal={version:"3.0",log:1,isMultitask:hi5.browser.isMultitask,util:{},logger:{debug:function(f){2<svGlobal.log&&console.log(f)},info:function(f){1<svGlobal.log&&console.log(f)},warn:function(f){0<svGlobal.log&&console.log(f)}}},isTouch=hi5.browser.isTouch;function cancelDefault(f){f.preventDefault();f.stopPropagation();return!1}
function LocalInterface(){function f(){return h.railWin?!0:!ba&&x<=window.innerWidth&&u<=window.innerHeight}function K(a){function b(a,b){for(var c,g=a.length,d=Array(g),h=0;h<g;h++){c=a[h];var j=d,f=h,l;l=c.identifier;if(!(256>l)){var m=e.indexOf(l);-1!==m?l=m:(e.push(l),l=e.length-1)}j[f]={contactId:l,contactFlags:b,x:c.pageX-k.offsetLeft,y:c.pageY-k.offsetTop}}return d}var c,e=[],g=!1;this.handle=function(d){var h=d.type,j=d.touches,k=d.changedTouches;cancelDefault(d);switch(h){case "touchstart":g=
!1;c=d=b(j,25);break;case "touchmove":d=b(k,26);h=!1;if(0<c.length&&1===d.length){a:{j=c.length;for(k=0;k<j;k++)if(c[k].contactId===d[0].contactId){j=k;break a}j=-1}-1!==j&&(c[j].x===d[0].x&&c[j].y===d[0].y)&&(h=!0)}if(h)break;else 0<c.length&&(a.redirectTouches(c),c.length=0);a.redirectTouches(d);g=!0;break;case "touchend":if(g)d=b(k,4);else{a.redirectTouches(c);d=c.length;for(h=0;h<d;h++)c[h].contactFlags=4;d=c}a.redirectTouches(d);e.length=c.length=0;break;case "touchcancel":a.redirectTouches(b(k,
34)),e.length=c.length=0}}}function r(a){function b(a,b){for(var c=0,e=a.length;c<e;c++)if(a[c].identifier===b)return a[c];return null}var c=0,e=0,d=0,g=0,h=!1,j=0,k=0,l=0,m=0,n=!1,D=!1,w=2*window.devicePixelRatio,s=0,O=!1;this.delay=!1;this.handle=function(z){var v=0,v=z.touches,p=z.changedTouches,t,q;switch(z.type){case "touchstart":moveSpace=moveCount=0;O=!1;e=v.length;D=!1;g=(new Date).getTime();h=1===e&&200>g-d;q=v[0];c=q.identifier;j=q.pageX;k=q.pageY;n=!0;2===e?(q=v[1].screenX-v[0].screenX,
v=v[1].screenY-v[0].screenY,s=Math.sqrt(q*q+v*v)):s=0;O=2===e&&s>110*window.devicePixelRatio;h&&cancelDefault(z);break;case "touchmove":if(O)return;1===e&&f()&&(window.scrollTo(0,0),cancelDefault(z));q=p[v.length-1];if(q.identifier!==c&&(q=b(p,c),!q)){cancelDefault(z);return}p=q.pageX;t=q.pageY;if(n){if(Math.abs(p-j)<w&&Math.abs(t-k)<w){cancelDefault(z);return}n=!1;v=(new Date).getTime()-g;if((D=180>v)&&!f()&&1===e){O=!0;return}a.touchstart({x:j,y:k,flick:D,pointes:e,screenX:q.screenX,screenY:q.screenY,
distance:s,move:!0})}cancelDefault(z);a.touchmove({x:p,y:t,flick:D,pointes:e,screenX:q.screenX,screenY:q.screenY,distance:s});break;case "touchend":if(O)return;if(q=b(p,c)){var u=(new Date).getTime(),p=q.pageX;t=q.pageY;D?a.touchend({x:p,y:t,flick:!0,pointes:e,moved:!n,screenX:q.screenX,screenY:q.screenY}):(v=u-g,n?(d=u,h?cancelDefault(z):(l=p,m=t),500>v?(d=u,a.touchstart({x:l,y:m,flick:!1,pointes:e,moved:!n,screenX:q.screenX,screenY:q.screenY,move:!1}),a.touchend({x:l,y:m,flick:!1,pointes:e,moved:!n,
screenX:q.screenX,screenY:q.screenY})):a.longpress({x:p,y:t,flick:!1,pointes:e,screenX:q.screenX,screenY:q.screenY})):a.touchend({x:p,y:t,flick:!1,pointes:e,moved:!n,screenX:q.screenX,screenY:q.screenY}))}break;case "touchcancel":console.log("canceled!!")}h&&cancelDefault(z)}}function A(){if(!g&&!hi5.$("wsinput")){g=document.createElement("textarea");g.id="wsinput";g.style.resize="none";g.style.opacity=0;g.style.position="absolute";g.style.margin="0";g.style.border="0";g.style.padding="3em";var a=
hi5.tool.getPos(k);g.style.left=a.x+"px";g.style.top=a.y+"px";g.style.width=x+"px";g.style.height=u+"px";g.style.zIndex=88;g.style.cursor="default";g.style.fontSize="1px";g.style.fontWeight="bold";k.parentNode.appendChild(g)}}function y(a){g&&(a?g.svIMEMode||(g.style.background="transparent",g.style.opacity=1,g.style.fontSize="2em",g.svIMEMode=!0):g.svIMEMode&&(g.style.opacity=0,g.style.fontSize="1px",g.svIMEMode=!1))}function p(){d||(d=document.getElementById("svImgCursor"),d||(d=document.createElement("img"),
d.id="svImgCursor",d.alt="+",d.style.position="absolute",d.style.left=90,d.style.top=90,d.scrX=0,d.scrY=0,d.hotX=0,d.hotY=0,ca&&(d.src=ca.data),document.body.appendChild(d),1<svGlobal.log&&console.log("imgCursor: enabled"),d.addEventListener("touchstart",G,!1),d.addEventListener("touchend",G,!1),d.addEventListener("touchmove",G,!1),d.addEventListener("touchcancel",G,!1)))}function P(){var a=document.documentElement;a.style.overflow="hidden";B=Math.min(window.innerWidth/x,window.innerHeight/u);hi5.tool.scale(a,
B)}function C(){h.toolbar&&h.toolbar.parentNode&&(h.toolbar.parentNode.removeChild(h.toolbar),h.toolbar=null)}function Q(){var a=document.createElement("div");a.contentEditable="true";a.style.position="absolute";a.style.zIndex=89;a.style.left=0;a.style.top=0;a.tabIndex=1;a.style.outline="none";a.style.opacity=0;k.parentNode.appendChild(a);return a}function w(a){h.focused=!0;l.onfocus(a);da=!0;g&&(!hi5.browser.isOpera&&s)&&(j(!1,29),j(!1,56),j(!1,42),ea&&setTimeout(function(){if("undefined"!==typeof l&&
l){l.send("880");var a=Q();try{a.focus();document.execCommand("paste",!1,null);var c="";if("innerText"in a)c=a.innerText;else var e=c=a.innerHTML,e=e.replace(/<br\/?>/gi,"\r\n").replace(/(<([^>]+)>)/gi,""),c=e.replace(/&[^;]+;/gi,function(a){return Ga[a]||a});0<c.length&&l.setDataFromClip(c)}catch(d){}finally{a.parentNode.removeChild(a),g.focus()}}},3))}function oa(a){if(!pa&&h.railWin&&h.railWin.isRunning()){var b=__svi18n.remoteApp.close;a||(a=window.event);a&&(a.returnValue=b);hi5.notifications.notify({msg:b});
return b}}function qa(){document.oncontextmenu=function(){return!1};document.onselectstart=function(){return!1}}function Ha(a){if(N)hi5.browser.isTouch||P();else l.onresize(a)}function fa(a){var b=hi5.browser;b.isChrome||b.isSafari?a.addEventListener("textInput",ra,!1):a.addEventListener("input",sa,!1)}function D(){ba=!0;var a=document.getElementById("pc_key");a&&(a.style.display="block",a.style.top=window.pageYOffset+"px")}function Ia(){ba=!1;var a=document.getElementById("pc_key");a&&(a.style.display=
"none")}function ta(a){cancelDefault(a);if("touchstart"===a.type){var b=a.target,c=0;switch(b.innerHTML.charCodeAt(0)){case 8592:c=203;break;case 8593:c=200;break;case 8594:c=205;break;case 8595:c=208;break;default:switch(a.target.innerHTML){case "Ctrl":H?j(!1,29):j(!0,29);H=!H;b.style.color=H?"red":"white";return;case "Alt":I?j(!1,56):j(!0,56);I=!I;b.style.color=I?"red":"white";return;case "Del":c=211;break;case "F1":c=59;break;case "F2":c=60;break;case "F3":c=61;break;case "F4":c=62;break;case "F5":c=
63;break;case "F6":c=64;break;case "F7":c=65;break;case "F8":c=66;break;case "F9":c=67;break;case "F10":c=68;break;case "F11":c=87;break;case "F12":c=88;break;case "Esc":c=1;break;case "Tab":c=15;break;case "PrtSc":c=183;break;case "Windows":c=219;break;case "Context":c=221;break;case "Alt+F4":j(!0,56);j(!0,62);j(!1,62);j(!1,56);return;case "Start":j(!0,29);j(!0,1);j(!1,1);j(!1,29);return;case "Ctrl+Alt+Del":j(!0,29);j(!0,56);j(!0,211);j(!1,211);j(!1,56);j(!1,29);return;case "...":if(a=document.getElementById("pc_key_more"))a.style.display=
"block"===a.style.display?"none":"block";return}}j(!0,c);j(!1,c)}}function J(){var a=hi5.browser.isRIM;n=document.getElementById("svTouchInput");if(!n&&(n=document.createElement(a?"input":"textarea"),a&&(n.type="password"),n.id="svTouchInput",n.style.resize="none",n.style.cursor="default",n.cols=1,n.rows=1,n.style.opacity=0,n.style.fontSize="2em",n.style.width="1px",n.style.height="1px",n.style.display="inline-block",n.onkeydown=ua,n.onkeyup=ua,n.autocorrect="boolean"===typeof n.autocorrect?!1:"off",
n.autocomplete="boolean"===typeof n.autocomplete?!1:"off",n.spellcheck=!1,n.autocapitalize="boolean"===typeof n.autocapitalize?!1:"none",fa(n),n.addEventListener("focus",D,!1),n.addEventListener("blur",Ia,!1),a=document.getElementById("pc_key"))){for(var b=a.getElementsByTagName("span"),c=b.length,e=0;e<c;e++)b[e].className="button",b[e].style.color="white",b[e].addEventListener("touchstart",ta,!1),b[e].addEventListener("touchup",ta,!1);hi5.browser.isSafari&&(a.style.position="absolute")}}function t(a,
b){function c(a,c){var e=document.createElement("span");e.data_path=a;e.className="path";e.innerHTML=c;e.onclick=function(){t(this.data_path,b)};return e}var e=document.getElementById("parentPath");e.currentDir||(e.currentDir="/");"."===a?a=e.currentDir:e.currentDir=a;e.currentDir=a;l.getShareFiles(a,function(a){function d(b){b||(b=h.getValue("Name"));var c=a.parent;if(""===c||"/"!==c.charAt(c.length-1))c+="/";return c+b}a.error&&alert(__svi18n.file[a.error]);var g=new hi5.DataTable(a),h=new hi5.DataGrid(document.getElementById("filelist"));
h.dataTable=g;var j=hi5.tool.bytesToSize;h.beforeDisplayValue=function(a,b){var c=g.cols[a].name;return"Date Modified"===c?(new Date(b)).toLocaleString():"Size"===c?j(b):"Type"===c&&"folder"===b?__svi18n.file.folder:b};h.onrowclick=function(c){var e=h.getValue("Name");"folder"===h.getValue("Type")?t(("/"===a.parent?"":a.parent)+"/"+e,b):(e=d(e),"view"===c.target.name&&(e+="&action=view"),l.getFile(e))};h.beforeAppendRow=function(a){if("folder"===g.getValue(g.getColNo("Type")))a.getElementsByTagName("img")[0].style.visibility=
"hidden";else{a.draggable=!0;var b=h.getValue("Name"),c=d(b),c="application/octet-stream:"+b+":"+l.getFileLink(c);a.addEventListener("dragstart",function(a){a.dataTransfer.setData("DownloadURL",c)},!1)}};h.open();for(var k=a.parent;e.hasChildNodes();)e.removeChild(e.firstChild);var f=c("/","&nbsp&nbsp&nbsp/");e.appendChild(f);if(!("/"===k||""===k))for(var k=k.split("/"),n="/",m=0,D=k.length;m<D;m++)f=k[m],""!==f&&(n=n+k[m]+"/",f=c(n,f+"/"),e.appendChild(f));b.resize()})}function m(){var a=document.getElementById("filecontainer");
E=new hi5.Lightbox(a);t(".",E);E.show()}function Ja(){n&&n.focus()}function ga(){var a=hi5.$("appinfo");if(h.showToolbar&&(hi5.browser.isTouch||F||a)){h.toolbar=new hi5.Toolbar;var b=hi5.appcfg,c=b&&b.img?b.img:null;hi5.browser.isTouch&&h.toolbar.addButton(c&&c.kbd?c.kbd:"kbd.png",Ja);F&&(c=h.toolbar.addButton(c&&c.cloud?c.cloud:"cloud.png",m),c.title=__svi18n.info.files);hi5.browser.isTouch&&(h.toolbar.appendChild(n),h.toolbar.activeObj=n);document.body.appendChild(h.toolbar);new hi5.Fadable(h.toolbar,
3E3,hi5.browser.isTouch?k:g);c=!0;b&&b.toolbar&&(c=b.toolbar.fadable);h.toolbar.setFadable(c);c&&(h.toolbar.style.display="none");hi5.browser.isTouch&&hi5.browser.isSafari&&(h.toolbar.style.position="absolute",h.toolbar.style.marginLeft=0);c=function(){var a=l.getAppInfo(),b=hi5.$("numericId");b&&(b.innerHTML=a.numericId);if(b=hi5.$("connectingTo"))b.innerHTML=a.server;if(b=hi5.$("joinLink")){var c=hi5.appcfg&&hi5.appcfg.pageJoin?hi5.appcfg.pageJoin:"join.html",c=location.protocol+"//"+location.host+
"/"+c+"?id="+a.numericId,d=a.webAddress;if(!d||1>d.length)d=l.getGateway();a=d.indexOf("://");d=d.substring(a+3);a=d.indexOf("/");0<a&&(d=d.substring(0,a));d.toLowerCase()!==location.host.toLowerCase()&&(c+="&gateway="+d);b.innerHTML=c;b.href=c}b=new hi5.Lightbox(hi5.$("appinfo"));b.show();document.oncontextmenu=null;document.onselectstart=null;b.onclose=qa};a&&(c=h.toolbar.addButton(b&&b.img&&b.img.shadowing?hi5.appcfg.img.shadowing:"info.png",c),c.title=__svi18n.info.info);if(h.onloadtoolbar)h.onloadtoolbar(h.toolbar)}}
function ha(a,b,c){a=d.scrX+a;b=d.scrY+b;0>a?a=0:a>x&&(a=x-1);0>b?b=0:b>u&&(b=u-1);d.scrX=a;d.scrY=b;d.style.left=k.offsetLeft+a-d.hotX+"px";d.style.top=k.offsetTop+b-d.hotY+"px";s&&!c&&l.send("82"+a+"\t"+b)}function W(a,b,c){d||p();ha(a-d.scrX,b-d.scrY,c)}function ia(a,b,c,e){var g;switch(a){case "touchstart":ja=!1;touchStartX=b;touchStartY=c;0===d.scrX&&0===d.scrY&&W(b-50,c-50);e&&l.send("80"+d.scrX+"\t"+d.scrY+"\t0");break;case "touchmove":ja=!0;e=b-X;a=c-R;if(0===e&&0===a)return;(g=5>Math.abs(va)&&
5>Math.abs(wa)&&(7<Math.abs(e)||7<Math.abs(a)))||ha(e,a);va=e;wa=a;break;case "touchend":(a=!ja&&!e)&&l.send("80"+d.scrX+"\t"+d.scrY+"\t0"),(a||e)&&l.send("81"+d.scrX+"\t"+d.scrY+"\t0")}X=b;R=c}function G(a){s&&Y.handle(a)}function ka(a){if(hi5.browser.isFirefox){switch(a){case 109:return 189;case 107:return 187;case 59:return 186;case 61:return la?187:61;case 220:return la?222:220;case 222:return la?192:222;case 224:return 17}return a}if(hi5.browser.isOpera){switch(a){case 59:return 186;case 61:return 187;
case 109:return 189;case 219:return 91;case 57351:return 93}return a}return 91===a||93===a?17:a}function xa(a){var b=a.keyCode,c="keydown"===a.type;c&&y(229<=b);if(ya(a,b,c))return cancelDefault(a);if(17===b){if(a.altKey)return!0;j(c,29);return!0}if(18===b){if(a.ctrlKey)return!0;j(c,56);j(!1,56);j(!1,29);return!0}if(a.ctrlKey&&a.altKey)return!0;var b=ka(b),e=ma(b);if(0<e)return j(c,e),cancelDefault(a);if(a.ctrlKey||a.altKey)return S(c,b),c&&(Z=b),17===b||(a.ctrlKey||a.metaKey)&&(86===b||67===b||88===
b)?(c&&67===b&&(g.value="A",g.select()),!0):cancelDefault(a);if(b===Z&&!c)return S(!1,b),Z=0,cancelDefault(a);Z=0;return!0}function ya(a,b,c){if(!a.altKey)return!1;switch(b){case 35:if(!a.ctrlKey)return!1;j(c,83);break;case 33:j(c,15);break;case 34:c?(j(!0,42),j(!0,15)):(j(!1,15),j(!1,42));break;case 45:j(c,1);break;case 36:c?(j(!1,56),j(!0,29),j(!0,1)):(j(!1,1),j(!1,29));break;default:return!1}return!0}function za(a){if(!s)return!1;var b=a.keyCode,c="keydown"===a.type;if(c)y(229<=b);else if(g&&g.svIMEMode)return!0;
if(ya(a,b,c))return cancelDefault(a);if(229<=b)return c&&a.ctrlKey?j(!0,29):j(!1,29),!0;if(1>b)return!0;b=ka(b);if(Aa(b,c))return cancelDefault(a);var e=ma(b);0<e?j(c,e):S(c,b);c&&(a.altKey&&31<b)&&(S(!1,b),j(!1,56));return 17===b||(a.ctrlKey||a.metaKey)&&(86===b||67===b||88===b)?(c&&67===b&&(g.value="A",g.select()),!0):144===b?!1:cancelDefault(a)}function ua(a){if(!s)return!1;var b=ka(a.keyCode),c="keydown"===a.type;if(!Aa(b,c)){13===b&&(a.target.value="");b=ma(b);0<b&&j(c,b);switch(b){case 29:H=
c;break;case 56:I=c}if(-1===b)if(H||I)S(c,a.keyCode);else return!0}return cancelDefault(a)}function ra(a){s&&(l.send("86"+a.data+"\t"+(H||I?1:0)),isTouch||(a.target.value=""),cancelDefault(a))}function sa(a){if(!s)return!1;l.send("86"+a.target.value+"\t"+(H||I?1:0));a.target.value="";return cancelDefault(a)}function Ka(a){if(!s||!da)return cancelDefault(a);da=!1;l.prePaste=!0;if("clipboardData"in a)return l.setDataFromClip(a.clipboardData.getData("text/plain")),cancelDefault(a);var b=a.target,c=b.value;
hi5.browser.isFirefox||hi5.browser.isOpera?b.removeEventListener("input",sa,!1):b.removeEventListener("textInput",ra,!1);var e=function(){b.value===c&&setTimeout(e,5);l.setDataFromClip(b.value);b.value="";fa(b)};setTimeout(e,5);return!0}function Ba(a){if(s){if(Ca){var b=(new Date).getTime(),c=b-Da;Da=b;if(500<c)return}a.target.value=l.getClipData();a.target.select();setTimeout(function(){g.value=""},555)}}function Aa(a,b){return 44===a?(j(!0,170),j(!0,183),!0):19===a?(b?(j(!0,225),j(!0,29),j(!0,69),
j(!0,225),j(!0,157),j(!0,197)):j(!1,29),!0):!1}function j(a,b){s&&l.send("84"+(a?0:49152)+"\t"+b)}function S(a,b){s&&l.send("8B"+(a?0:49152)+"\t"+b)}function $(a,b,c,e){e||(e=B);l.send("80"+a/e+"\t"+b/e+"\t"+c)}function La(a){a.target.focus();if(!s)return!1;y(!1);var b=a.pageX-k.offsetLeft,c=a.pageY-k.offsetTop;if(h.railWin){var e=h.railWin.winClientDeltaX;T=b<=e||b>=window.innerWidth-e||c<=e||c>=window.innerHeight-e}else T=!1;if(T)return!1;$(b,c,a.button);return cancelDefault(a)}function Ma(a){if(!s)return!1;
d&&"-30px"!==d.style.left&&(d.style.left="-30px");var b=a.pageX-k.offsetLeft,c=a.pageY-k.offsetTop,e=void 0,e=B;l.send("82"+b/e+"\t"+c/e);return cancelDefault(a)}function aa(a,b,c,e){e||(e=B);l.send("81"+a/e+"\t"+b/e+"\t"+c)}function Na(a){if(!s)return!1;if(T)return T=!1;aa(a.pageX-k.offsetLeft,a.pageY-k.offsetTop,a.button);return cancelDefault(a)}function Ea(a){if(!s)return!1;var b=a.pageX-k.offsetLeft,c=a.pageY-k.offsetTop,e="1";a.wheelDelta?0<a.wheelDelta&&(e="0"):a.detail&&0>a.detail&&(e="0");
a=void 0;a=B;l.send("83"+b/a+"\t"+c/a+"\t"+e);return!1}function ma(a){switch(a){case 33:return 201;case 34:return 209;case 35:return 207;case 36:return 199;case 37:return 203;case 38:return 200;case 39:return 205;case 40:return 208;case 154:return 183;case 45:return 210;case 46:return 211;case 65406:return 184;case 91:return 91;case 93:return 93;case 27:return 1;case 8:return 14;case 9:return 15;case 13:return 28;case 224:case 17:return 29;case 16:return 54;case 18:return 56;case 20:return 58;case 112:return 59;
case 113:return 60;case 114:return 61;case 115:return 62;case 116:return 63;case 117:return 64;case 118:return 65;case 119:return 66;case 120:return 67;case 121:return 68;case 122:return 87;case 123:return 88;case 144:return 69;case 145:return 70}return-1}function Fa(a){return"url("+a.data+") "+a.hotX+" "+a.hotY+", default"}var k=document.getElementById("remotectrl"),l=null,N=!1,B=1;k.style.outline="none";var x=0,u=0,L=k.getContext("2d"),g=null,Ca=!1,H=!1,I=!1,pa=!1,da=!1,F=null,ea=!0;this.context=
L;this.fileProgress=null;var h=this,s=!0,U=!1,M=!1,V=null,E=null,d=null,ca=null,Y=null,n=null,ba=!1,X=-1,R=-1,va=0,wa=0,ja=!1,na=null;window.devicePixelRatio=window.devicePixelRatio||1;this.railWin=this.toolbar=null;this.browser=window;this.focused=!1;this.showToolbar=!0;this.requestCredential=function(a){var b=__svi18n.template.login;if(b){console.log(a);var c=document.createElement("div");c.className="appdlg";c.innerHTML=b;document.body.appendChild(c);if((b=hi5.$("loginDomain"))&&a.nbDomain)b.innerHTML=
a.nbDomain;var e=new hi5.Lightbox(c,0.9);e.onclose=function(){document.body.removeChild(c)};try{h.close()}catch(d){}e.show();(b=hi5.$("loginUser"))&&b.focus();if(b=hi5.$("frmLogin"))b.onsubmit=function(){var a=hi5.$("loginUser").value,b=hi5.$("loginPassword").value,c=hi5.$("loginDomain").innerHTML;e.dismiss();setTimeout(function(){l.reconnect(a,b,c)},5);return!1}}else alert("No value for login template")};hi5.browser.isTouch?J():A();window.addEventListener("scroll",function(){setTimeout(function(){var a=
document.getElementById("pc_key");a&&(a.style.left=window.pageXOffset+"px",a.style.top=window.pageYOffset+"px");h.toolbar&&(h.toolbar.style.top=window.pageYOffset+"px",h.toolbar.style.left=window.pageXOffset+(window.innerWidth-h.toolbar.offsetWidth)/2+"px")},200)},!1);this.setCaretPos=function(){};this.showMessage=function(a){hi5.notifications.notify({msg:a})};this.hideWhenClose=!0;this.setReadOnly=function(a){s=!a};this.setPlayerMode=function(){M=!0;h.showToolbar=!1;h.setReadOnly(!0);h.hideWhenClose=
!1};this.setAutoScale=function(a){N=a};this.setTouchpad=function(a){(U=a)?d||p():d&&d.parentNode&&(d.parentNode.removeChild(d),d=null)};this.setSize=function(a,b,c){window.scrollTo(0,0);x=a;u=b;k.width=x;k.height=u;hi5.browser.isTouch?J():(A(),g.style.width=x+"px",g.style.height=u+"px");E&&E.visible()&&E.dismiss();if(N){if(!(a=!hi5.browser.isTouch))a=window.innerWidth,b=window.innerHeight,a=Math.max(x,u)<Math.max(a,b)&&Math.min(x,u)<Math.min(a,b);a&&(N=!1)}N?P():hi5.browser.isTouch||(a=document.documentElement,
c?(na=c,a.style.overflow=c):(na=x<=window.innerWidth&&u<=window.innerHeight?"hidden":"visible",a.style.overflow=na))};window.svSurface=this;this.setController=function(a){l=a;hi5.browser.isTouch&&window.addEventListener("orientationchange",function(a){N?P():(l.onorientationchange(a),window.scrollTo(0,0))},!1)};this.setFileHandler=function(a){a?!F&&!M&&(F=a,h.fileProgress=new hi5.ProgressBar(document.getElementById("total")),C(),ga(),a=hi5.browser.isTouch?k:g,F&&!M&&(svGlobal.util.initMapDisk(a,F),
svGlobal.util.initMapDisk(document.getElementById("filecontainer"),F),document.getElementById("uploadfile").addEventListener("change",function(a){F(a.target.files)},!1))):(F=null,h.fileProgress=null,h.toolbar&&h.toolbar.removeButton("cloud.png"),C(),ga())};this.disableUpload=function(){document.getElementById("uploadfile").style.visibility="hidden"};this.disableShadow=function(){h.toolbar&&h.toolbar.removeButton("info.png")};this.close=function(){if(0<hi5.notifications.notifySize())hi5.notifications.onempty=
function(){h.close()};else{h.removeEvents();try{d&&d.parentNode&&(d.parentNode.removeChild(d),d=null),C(),pa=!0,window&&!M&&(window.opener?window.close():this.hide())}catch(a){}}};this.setFastCopy=function(a){Ca=a};this.drawLicense=function(a){var b=a.charAt(0);L.font="12pt Arial";L.fillStyle="W"===b?"red":"black";a=a.substring(1);L.fillText(a,10,u-24)};this.drawText=function(a){L.font="18pt Arial";L.fillStyle="black";L.fillText(a,20,50)};this.showPDF=function(a){var b=document.createElement("div");
b.style.backgroundColor="white";b.style.width=hi5.browser.isTouch?"30%":"95%";b.style.height=hi5.browser.isTouch?"4elm":"90%";var c=__svi18n.info.printready||"Your document is ready.";b.innerHTML=hi5.browser.isTouch?'<p style="text-align:center;line-height:4em"><a href="'+a+'" target="_blank">'+c+"</a></p>":'<iframe src="'+a+'" width="100%" height="100%"><html><body marginwidth="0" marginheight="0"><embed width="100%" height="100%" name="plugin" src="'+a+'" type="application/pdf"></body></html></iframe>';
document.body.appendChild(b);a=new hi5.Lightbox(b);a.onclose=function(){b.parentNode.removeChild(b)};a.show()};this.hide=function(){h.hideWhenClose&&(k.height=1,k.width=1);g&&(g.style.visibility="hidden")};this.copyToClip=function(a){if(window.clipboardData)window.clipboardData.setData("Text",a);else if(!n){var b=Q();"innerText"in b?b.innerText=a:b.innerHTML=a.replace(/\r\n/g,"<br/>");try{b.focus(),document.execCommand("selectAll",!1,null),document.execCommand("copy",!1,null)}catch(c){}finally{b.parentNode.removeChild(b),
g&&g.focus()}}};this.fullScreen=function(){k.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT)};this.removeEvents=function(){if(window){window.removeEventListener("beforeunload",oa,!1);window.removeEventListener("focus",w,!1);window.onresize=null;try{V&&V.parentNode&&(V.parentNode.removeChild(V),V=null),g&&g.parentNode&&(g.parentNode.removeChild(g),g=null)}catch(a){}}document&&(document.oncontextmenu=null,document.onselectstart=null,document.documentElement.style.overflow="visible")};this.refreshFiles=
function(){E&&E.visible()&&t(".",E)};this.processLink=function(a){h.toolbar.addButton(hi5.appcfg&&hi5.appcfg.img&&hi5.appcfg.img.info?hi5.appcfg.img.info:"info.png",function(b){window.open(a);b.target.parentNode.removeChild(b.target)}).title=a;h.toolbar.startFade()};this.setUnicode=function(a){g&&(a?(0<svGlobal.log&&console.log("Using unicode"),g.onkeydown=xa,g.onkeyup=xa):(0<svGlobal.log&&console.log("Using non-unicode"),g.onkeydown=za,g.onkeyup=za))};this.setTouchRemoting=function(a){!0===a?(Y=
new K(h,k),console.log("touch remoting"),h.showMessage(__svi18n.info.touchremoting)):Y=new r(h)};this.setClipboard=function(a){ea=a};this.run=function(a){window.scrollTo(0,0);C();ga();M||(window.addEventListener("beforeunload",oa,!1),qa(),window.addEventListener("focus",w,!1),window.addEventListener("blur",function(){h.focused=!1},!1),window.addEventListener("resize",Ha,!1));hi5.browser.isTouch?M||(Y=new r(h),k.addEventListener("touchstart",G,!1),k.addEventListener("touchend",G,!1),k.addEventListener("touchmove",
G,!1),k.addEventListener("touchcancel",G,!1)):(M||(g.addEventListener("mousemove",Ma,!1),g.addEventListener("mousedown",La,!1),g.addEventListener("mouseup",Na,!1),g.addEventListener("mousewheel",Ea,!0),g.addEventListener("DOMMouseScroll",Ea,!0),ea&&(g.addEventListener("paste",Ka,!1),g.addEventListener("copy",Ba,!1),g.addEventListener("cut",Ba,!1))),h.setUnicode(a),fa(g),a=hi5.tool.getPos(k),g.style.left=a.x+"px",g.style.top=a.y+"px",g.focus());this.drawText(__svi18n.wait);if(h.onstart)h.onstart(k)};
var Ga={"&euro;":"\ufffd","&nbsp;":" ","&quot;":'"',"&amp;":"&","&lt;":"<","&gt;":">","&iexcl;":"\ufffd","&cent;":"\ufffd","&pound;":"\ufffd","&curren;":"\ufffd","&yen;":"\ufffd","&brvbar;":"\ufffd","&sect;":"\ufffd","&uml;":"\ufffd","&copy;":"\ufffd","&ordf;":"\ufffd","&reg;":"\ufffd"};this.movCursorBy=ha;this.moveCursor=W;this.touchstart=function(a){U&&1===a.pointes&&(a.pointes=2);switch(a.pointes){case 1:(!a.flick||f())&&$(a.x-k.offsetLeft,a.y-k.offsetTop,0);break;case 2:d||p();ia("touchstart",
a.screenX,a.screenY,!a.flick);break;case 3:X=a.screenX,R=a.screenY}};this.touchmove=function(a){U&&1===a.pointes&&(a.pointes=2);switch(a.pointes){case 1:if(!a.flick||f()){var b=void 0,b=B;l.send("82"+(a.x-k.offsetLeft)/b+"\t"+(a.y-k.offsetTop)/b)}break;case 2:ia("touchmove",a.screenX,a.screenY,!a.flick);break;case 3:b=void 0,b=B,l.send("83"+(a.x-k.offsetLeft)/b+"\t"+(a.y-k.offsetTop)/b+"\t"+(0<a.screenY-R?0:1)),X=a.screenX,R=a.screenY}};this.touchend=function(a){a.moved||k.focus();U&&1===a.pointes&&
(a.pointes=2);switch(a.pointes){case 1:W(a.x,a.y,!0);(!a.flick||f())&&aa(a.x-k.offsetLeft,a.y-k.offsetTop,0);break;case 2:ia("touchend",a.screenX,a.screenY,!a.flick);break;case 3:a.moved||(h.toolbar&&(h.toolbar.style.display="block"),n&&n.focus())}};this.flick=function(a){switch(a.from){case 4:console.log("flick from botton");l.send("840\t209");l.send("8449152\t209");break;case 2:console.log("flick from top"),l.send("840\t201"),l.send("8449152\t201")}};this.longpress=function(a){U&&(a.pointes=2);
switch(a.pointes){case 1:var b=a.x-k.offsetLeft;a=a.y-k.offsetTop;W(b,a);$(b,a,2);aa(b,a,2);break;case 2:d&&($(d.scrX,d.scrY,2,1),aa(d.scrX,d.scrY,2,1))}};this.redirectTouches=function(a){if(s){for(var b=a.length,c,e="90"+b,d=0;d<b;d++)c=a[d],e=e+"\t"+c.contactId+";"+c.contactFlags+";"+Math.floor(c.x/B)+";"+Math.floor(c.y/B);l.send(e)}};var la=-1!==navigator.platform.indexOf("Mac"),Z=0,Da=0,T=!1;this.setCursor=function(a){ca=a;hi5.browser.isOpera||(d&&(d.src=a.data,d.hotX=a.hotX,d.hotY=a.hotY),g?
g.style.cursor=Fa(a):k.style.cursor=Fa(a))};this.setVisible=function(a,b){var c=a?"visible":"hidden";"number"===typeof b?setTimeout(function(){k.style.visibility=c},b):k.style.visibility=c}}svGlobal.LocalInterface=LocalInterface;
function initDragDrop(f,K){function r(f){if(1!==f.length)alert("Please one file only");else{var p=f[0];f=p.name;var r=f.length;if(4<r&&".rdp"===f.substring(r-4).toLowerCase()){var y=new FileReader,C=!1;y.onload=function(f){var r=f.target.result;if(r){var w=K;f=w.elements;var J=r.split("\r\n");2>J.length&&(J=r.split("\n"));if(2>J.length)f=!1;else{var r=document.getElementById("gateway"),t=r.value;w.reset();r.value=t;w=0;for(r=J.length;w<r;w++){var m=J[w],t=m.indexOf(":"),A=m.substring(0,t),m=m.substring(t+
3),A=A.toLowerCase();switch(A){case "full address":t=m.indexOf(":");0<t?(f.server.value=m.substring(0,t),f.port.value=m.substring(t+1)):f.server.value=m;break;case "username":f.user.value=m;break;case "domain":f.domain.value=m;break;case "connect to console":f.useConsole.checked="0"!==m;break;case "desktopwidth":f.width.value=m;break;case "desktopheight":f.height.value=m;break;case "session bpp":f.server_bpp.value=m;break;case "audiomode":f.playSound.value=m;break;case "alternate shell":0<m.length&&
(f.command.value=m,document.getElementById("app").checked||(document.getElementById("shell").checked=!0));break;case "shell working directory":f.directory=m;break;case "redirectclipboard":f.mapClipboard.checked="0"!==m;break;case "redirectprinters":f.mapPrinter.checked="0"!==m;break;case "server port":0<m.length&&(f.port.value=m);break;case "disable wallpaper":f.background.checked="0"===m;break;case "disable themes":f.styles.checked="0"===m;case "disable menu anims":f.animation.checked="0"===m;break;
case "disable full window drag":f.contents.checked="0"===m;break;case "allow font smoothing":f.smoothfont.checked="0"!==m;break;case "allow desktop composition":f.composition.checked="0"!==m;break;case "bitmapcachepersistenable":f.bitmap.checked="0"!==m;break;case "remoteapplicationprogram":f.exe.value=m;break;case "remoteapplicationcmdline":f.args.value=m;break;case "remoteapplicationmode":document.getElementById("app").checked="1"===m;break;case "loadbalanceinfo":f.loadBalanceInfo.value=m}}f=!0}!f&&
!C&&(C=!0,y.readAsText(p))}};y.readAsText(p,"UTF-16LE")}else alert("Sorry, Please .rdp file only")}}function A(f){r(f.target.files)}function y(p){cancelDefault(p);f.style.backgroundColor=C;r(p.dataTransfer.files)}function p(p){cancelDefault(p);f.style.backgroundColor="yellow"}function P(p){cancelDefault(p);f.style.backgroundColor=C}if("FileReader"in window){var C=f.style.backgroundColor,Q=document.getElementById("rdpfile");Q&&Q.addEventListener("change",A,!1);f.addEventListener("dragover",p,!1);f.addEventListener("dragleave",
P,!1);f.addEventListener("drop",y,!1)}}svGlobal.util.initDragDrop=initDragDrop;
svGlobal.util.initMapDisk=function(f,K){function r(p){cancelDefault(p);"0"===f.style.opacity&&(f.style.opacity="0.611");f.style.backgroundColor="yellow"}function A(p){p.stopPropagation();p.preventDefault();"0.611"===f.style.opacity&&(f.style.opacity="0");f.style.backgroundColor=f.__oldColor}function y(p){p.stopPropagation();p.preventDefault();"0.611"===f.style.opacity&&(f.style.opacity="0");f.style.backgroundColor=f.__oldColor;K(p.dataTransfer.files)}"FileReader"in window&&(f.__oldColor=f.style.backgroundColor,
f.addEventListener("dragover",r,!1),f.addEventListener("dragleave",A,!1),f.addEventListener("drop",y,!1))};window.addEventListener("load",function(){for(var f=document.getElementsByClassName("ver"),K=f.length,r=0;r<K;r++)f[r].innerHTML=svGlobal.version},!1);
